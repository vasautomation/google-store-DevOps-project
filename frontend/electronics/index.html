<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Google Store ‚Äî Electronics</title>
<meta name="description" content="Advanced demo e-commerce template: animations, carousel, cart, filters, offline" />
<link rel="stylesheet" href="style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" defer></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.3/dist/vanilla-tilt.min.js" defer></script>
<script src="https://unpkg.com/feather-icons" defer></script>
</head>
<body data-category="electronics" data-theme="dark">
<div id="preloader" class="preloader" role="status" aria-live="polite">
  <div class="loader">
    <svg viewBox="0 0 100 100" class="spin"><circle cx="50" cy="50" r="40"></circle></svg>
    <div class="loader-text">Loading Google Store...</div>
  </div>
</div>
  
<header class="site-header" role="banner">
  <div class="nav-inner container">
      <span class="brand-text">
        <img src="https://latestlogo.com/wp-content/uploads/2024/01/google-store-logo.png" alt="Google Store Logo" style="width:64px; height:64px; object-fit:contain; vertical-align:middle; margin-left:6px;">
      </span>
    </a>
    <nav class="main-nav" aria-label="Primary">
      <ul>
        <li><a href="/electronics" class="">Electronics</a></li>
        <li><a href="/phones" class="active">Phones</a></li>
        <li><a href="/computers" class="">Computers</a></li>
        <li><a href="/earphones" class="">Earphones</a></li>
      </ul>
    </nav>
    <div class="nav-actions">
      <div class="search-wrap">
        <input id="search" type="search" placeholder="Search products..." aria-label="Search products">
        <button id="clearSearch" class="icon-btn" title="Clear search" aria-hidden="true">‚úï</button>
      </div>
      <button id="viewToggle" class="icon-btn" title="Toggle view" aria-pressed="false">üîÅ</button>
      <button id="themeToggle" class="icon-btn" title="Toggle theme" aria-pressed="false">üåì</button>
      <button id="cartBtn" class="icon-btn cart-btn" aria-label="Open cart">üõí <span id="cartCount" class="cart-count">0</span></button>
    </div>
  </div>
</header>

<div class="parallax">
  <div class="p-layer layer-1"></div>
  <div class="p-layer layer-2"></div>
  <div class="p-layer layer-3"></div>
</div>

<main class="container main" role="main">
  <section class="hero">
    <div class="hero-left reveal">
      <h1 id="page-title">Electronics</h1>
      <p class="lead" id="page-sub"></p>
      <div class="hero-cta">
        <button id="browseAll" class="btn primary">Browse all</button>
        <button id="viewDeals" class="btn ghost">Top deals</button>
      </div>
      <div class="meta-row">
        <div class="muted">Free shipping | Secure checkout</div>
      </div>
    </div>
    <div class="hero-right reveal">
      <div class="hero-card floating" id="hero-feature">
        <img id="hero-image" src="https://via.placeholder.com/420x280?text=Feature" alt="Featured product" loading="lazy">
        <div class="hero-info">
          <div id="hero-name">Hot pick</div>
          <div id="hero-price">‚Çπ0</div>
        </div>
      </div>
    </div>
  </section>

  <section class="controls reveal">
    <div class="controls-left">
      <label>Sort:
        <select id="sort" onchange="applyFilters()">
          <option value="featured">Featured</option>
          <option value="price-asc">Price: Low ‚Üí High</option>
          <option value="price-desc">Price: High ‚Üí Low</option>
          <option value="rating">Top rated</option>
        </select>
      </label>
      <label>Category:
        <select id="categoryFilter" onchange="applyFilters()">
          <option value="all">All</option>
          <option value="new">New arrivals</option>
        </select>
      </label>
    </div>
    <div class="controls-right">
      <label class="switch">
        <input id="toggleLazy" type="checkbox" checked>
        <span class="slider"></span>
      </label>
      <small class="muted">Lazy images</small>
      <button id="gridBtn" class="btn small">Grid</button>
      <button id="carouselBtn" class="btn small ghost">Carousel</button>
    </div>
  </section>

  <section class="catalog reveal">
    <div id="gridView" class="grid-view" aria-live="polite" tabindex="-1"></div>
    <div id="carouselView" class="carousel-view" aria-hidden="true">
      <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="swiperWrapper"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-pagination"></div>
      </div>
    </div>
  </section>
</main>

<div id="modal" class="modal-backdrop" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="modal-card" role="document">
    <button id="modalClose" class="close" aria-label="Close">‚úï</button>
    <div class="modal-grid">
      <div class="modal-media"><img id="modalImg" src="" alt="" loading="lazy"></div>
      <div class="modal-content">
        <h2 id="modalTitle">Product</h2>
        <p id="modalDesc" class="muted">Description</p>
        <div id="modalPrice" class="price">‚Çπ0</div>
        <div class="modal-actions">
          <button id="modalAdd" class="btn primary">Add to cart</button>
          <button id="modalFav" class="btn ghost">‚ù§ Wishlist</button>
        </div>
      </div>
    </div>
  </div>
</div>

<aside id="cart" class="cart cart--solid" aria-label="Shopping cart" aria-hidden="true" style="background:#23272f;border-radius:12px;box-shadow:0 2px 16px rgba(0,0,0,0.12);backdrop-filter:none;">
  <div class="cart-header" style="background:none;border-bottom:1px solid #20232a;">
    <h3 style="color:#fff;">Cart</h3>
    <button id="cartClose" class="close" aria-label="Close" style="color:#fff;">‚úï</button>
  </div>
  <div id="cartList" class="cart-list" tabindex="0" style="background:none;color:#ddd;"></div>
  <div class="cart-footer" style="background:none;border-top:1px solid #20232a;">
    <div class="total-row">
      <div class="muted">Total</div>
      <div id="cartTotal" class="price" style="color:#fff;">‚Çπ0</div>
    </div>
    <div class="cart-actions" style="background:none;">
      <div style="display:flex;align-items:center;gap:0.5em;flex-direction:column;">
        <form action="/payment" method="get" style="margin:0;">
          <button id="payNow" class="btn primary" type="submit">checkout</button>
        </form>
        <small class="muted">UPI ID: <strong>google.store@upi</strong></small>
      </div>
      <button id="emptyCart" class="btn ghost">Empty</button>
    </div>
  </div>
</aside>

<footer class="site-footer">
  <div class="container">
    <div class="foot-grid">
      <div><strong>Google Store</strong><p class="muted">developed by Abinash Kumar</p></div>
      <div class="muted">¬© <span id="year"></span></div>
    </div>
  </div>
</footer>



<!-- Payment Modal -->
<div id="paymentModal" class="modal-backdrop" aria-hidden="true" role="dialog" aria-modal="true" style="display:none">
  <div class="modal-card" role="document" style="max-width: 480px;">
    <button id="paymentClose" class="close" aria-label="Close" style="top:10px;right:10px;position:absolute;">‚úï</button>
    <div style="padding: 32px 24px 24px;">
      <h2 style="margin-top:0">Payment</h2>
      <p class="muted">Choose your payment method:</p>
      <div style="margin: 24px 0;">
        <button class="btn primary" onclick="showPaymentTab('UPI')">UPI</button>
        <button class="btn ghost" onclick="showPaymentTab('Netbanking')">Net Banking</button>
        <button class="btn ghost" onclick="showPaymentTab('Card')">Credit/Debit Card</button>
      </div>
      <!-- Show Total Amount in Payment Modal -->
      <div id="totalAmountWrapper" style="margin-bottom: 24px; text-align:center;">
        <span style="font-size:1.1em;color:#fff;">Total Amount to Pay:&nbsp;</span>
        <span id="totalPaymentAmount" style="font-weight:bold;font-size:1.25em;color:#4dd784;">‚Çπ0</span>
      </div>
      <div id="paymentUPI" style="display:none;">
        <div style="margin-bottom:1em;">Pay to UPI ID: <strong>6303965190@kotak811</strong></div>
        <!-- INSERTED QR IMAGE -->
        <img src="https://i.ibb.co/84GXkSMt/pay.jpg" alt="UPI QR" style="display:block;margin:0 auto 1em auto;width:150px;height:150px;object-fit:contain;background:#fff;border-radius:8px;">
        <!-- (optional) If you want to also keep the generated QR, uncomment below: -->
        <!-- <canvas id="upiQR" style="display:none;margin:0 auto 1em auto;" width="150" height="150"></canvas> -->
        <input id="upiInput" type="text" value="6303965190@kotak811" readonly style="width:100%;padding:6px;margin-bottom:1em;text-align:center;" onclick="this.select()">
        <div style="font-size:0.95em;color:#aaa; text-align:center;">Scan QR with any UPI app or copy/paste UPI ID</div>
        <button class="btn small" style="margin-top:1em" onclick="copyUPIID()">Copy UPI ID</button>
      </div>
      <div id="paymentNetbanking" style="display:none;">
        <form id="netbankingForm" onsubmit="event.preventDefault(); handlePaymentDone('Netbanking');">
          <label style="display:block; margin-bottom:8px;">Bank
            <select required style="width:100%;padding:6px;">
              <option value="">Choose bank</option>
              <option>SBI</option>
              <option>HDFC Bank</option>
              <option>Kotak Mahindra</option>
              <option>ICICI Bank</option>
              <option>Axis Bank</option>
              <option>Other...</option>
            </select>
          </label>
          <label style="display:block; margin-bottom:8px;">User ID
            <input type="text" required style="width:100%;padding:6px;" />
          </label>
          <label style="display:block; margin-bottom:16px;">Password
            <input type="password" required style="width:100%;padding:6px;" autocomplete="off"/>
          </label>
          <button class="btn primary" type="submit" style="width:100%;">Pay Now</button>
        </form>
      </div>
      <div id="paymentCard" style="display:none;">
        <form id="cardPaymentForm" onsubmit="event.preventDefault(); handlePaymentDone('Card');">
          <label style="display:block; margin-bottom:8px;">Card Number
            <input type="text" maxlength="19" pattern="\d*" inputmode="numeric" placeholder="XXXX XXXX XXXX XXXX" required style="width:100%;padding:6px;" />
          </label>
          <div style="display:flex;gap:8px;margin-bottom:8px;">
            <label style="flex:1;">Expiry
              <input type="text" maxlength="5" pattern="\d{2}/\d{2}" placeholder="MM/YY" required style="width:100%;padding:6px;" />
            </label>
            <label style="flex:1;">CVV
              <input type="password" maxlength="4" pattern="\d{3,4}" placeholder="CVV" required style="width:100%;padding:6px;" />
            </label>
          </div>
          <label style="display:block; margin-bottom:16px;">Name on card
            <input type="text" required style="width:100%;padding:6px;" />
          </label>
          <button class="btn primary" type="submit" style="width:100%;">Pay Now</button>
        </form>
      </div>
      <!-- Receipt Modal (hidden initially) -->
      <div id="receiptModal" style="display:none; background: #1e1e1e; border-radius: 8px; box-shadow:0 0 8px #0007; padding:28px 24px 24px 24px; text-align:center; margin-top:16px;">
        <h3 style="color:#4dd784; margin-bottom:0.5em;">Payment Successful!</h3>
        <div class="muted" style="margin-bottom:1em;">Thank you for your purchase.<br>Your payment has been received. <br>You can now view or download your receipt.</div>
        <button class="btn primary" onclick="viewReceipt()">View Receipt</button>
        <button class="btn ghost" style="margin-left:12px" onclick="downloadReceipt()">Download Receipt</button>
      </div>
      <!-- End receipt modal section -->
    </div>
  </div>
</div>
<style>
#paymentModal[aria-hidden="false"] { display: flex !important; align-items: center; justify-content: center; }
#paymentModal .modal-card { background: #161616; border-radius: 10px; box-shadow: 0 4px 32px #0008; }
</style>

<footer class="site-footer">
  <div class="container">
    <div class="foot-grid">
      <div>
        <strong>Google Store</strong>
        <p class="muted">developed by abinash kumar</p>
      </div>
      <div class="muted">¬© <span id="year"></span></div>
    </div>
  </div>
</footer>

<script src="script.js" defer></script>
<script>
// --- Receipt Data Extraction ---
// Helper to extract product details from cart DOM nodes (assuming cart item format)
// We will try to extract: name, price, quantity (if available), description (if available), and image (if available)

// Updated extractCartProducts to get the image src (if any)
function extractCartProducts() {
  const cartListElem = document.getElementById('cartList');
  if (!cartListElem || cartListElem.children.length === 0) return [];
  let products = [];
  for (const child of Array.from(cartListElem.children)) {
    let name = '', price = '', qty = 1, desc = '', img = '';

    if (child.querySelector) {
      let el;
      if ((el = child.querySelector('.cart-name'))) name = el.textContent.trim();
      if ((el = child.querySelector('.cart-price'))) price = el.textContent.trim();
      if ((el = child.querySelector('.cart-qty'))) qty = Number(el.textContent.trim()) || 1;
      if ((el = child.querySelector('.cart-desc'))) desc = el.textContent.trim();

      // Try to extract product image
      // Accepts .cart-img or <img> within cart item
      if ((el = child.querySelector('.cart-img')) && el.tagName.toLowerCase() === 'img') {
        img = el.src;
      } else if ((el = child.querySelector('img'))) {
        img = el.src;
      }

      if (!name || !price) {
        let text = child.textContent || '';
        let priceMatch = text.match(/‚Çπ\s*([0-9,.]+)/);
        if (priceMatch) price = '‚Çπ' + priceMatch[1];
        let qtyMatch = text.match(/x\s*(\d+)/);
        if (qtyMatch) qty = parseInt(qtyMatch[1]);
        if (priceMatch) {
          const beforePrice = text.slice(0, priceMatch.index).trim();
          name = beforePrice.replace(/x\s*\d+$/, '').trim();
        } else {
          name = text.split('‚Çπ')[0].replace(/x\s*\d+$/, '').trim();
        }
      }
    } else {
      let text = child.textContent || '';
      let priceMatch = text.match(/‚Çπ\s*([0-9,.]+)/);
      if (priceMatch) price = '‚Çπ' + priceMatch[1];
      let qtyMatch = text.match(/x\s*(\d+)/);
      if (qtyMatch) qty = parseInt(qtyMatch[1]);
      name = text.split('‚Çπ')[0].replace(/x\s*\d+$/, '').trim();
    }

    products.push({
      name,
      price,
      qty,
      desc,
      img
    });
  }
  return products;
}

// Payment Modal Logic
const paymentModal = document.getElementById('paymentModal');
const paymentTabs = {
  UPI: document.getElementById('paymentUPI'),
  Netbanking: document.getElementById('paymentNetbanking'),
  Card: document.getElementById('paymentCard')
};
function showPaymentTab(tab) {
  Object.values(paymentTabs).forEach(t => t.style.display = 'none');
  paymentTabs[tab].style.display = '';
  // Hide receipt area if toggling between payment options
  hideReceipt();
  // Since QR image is static, don't call generateUPIQR here anymore
}
function openPaymentModal() {
  paymentModal.style.display = 'flex';
  paymentModal.setAttribute('aria-hidden', 'false');
  showPaymentTab('UPI');
  // Show total amount in payment modal
  updateTotalPaymentAmount();
  hideReceipt();
}
function closePaymentModal() {
  paymentModal.style.display = 'none';
  paymentModal.setAttribute('aria-hidden', 'true');
  hideReceipt();
}
document.getElementById('paymentClose').onclick = closePaymentModal;

function hideReceipt() {
  const receiptDiv = document.getElementById("receiptModal");
  if (receiptDiv) receiptDiv.style.display = 'none';
}

// If you ever want to bring back dynamic QR, you could update generateUPIQR() to update the image src instead
function generateUPIQR() {
  // QR is now static image, so nothing needed here
}
function copyUPIID() {
  const input = document.getElementById("upiInput");
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  alert("UPI ID Copied: " + input.value);
}

// Show receipt after payment done
function handlePaymentDone(method) {
  // Hide payment forms/tabs
  Object.values(paymentTabs).forEach(t => t.style.display = 'none');
  var receiptDiv = document.getElementById("receiptModal");
  if(receiptDiv){
    receiptDiv.style.display = 'block';
  }
  // You may clear the cart here, or after viewing/downloading receipt
  // (uncomment if you want to clear cart now)
  // clearCartAfterPayment();
}

// Enhanced: receipt with product, purchased details, and product small image
function viewReceipt() {
  const date = new Date();
  const total = document.getElementById('totalPaymentAmount').textContent;
  let products = extractCartProducts();
  let itemsHTML = '';

  if (products.length > 0) {
    itemsHTML = `<table style="width:100%;border-collapse:collapse;font-size:1em;">
      <thead>
        <tr>
          <th style="border-bottom:1px solid #eee;text-align:left;padding:4px 0;">Product</th>
          <th style="border-bottom:1px solid #eee;text-align:center;padding:4px 0;">Qty</th>
          <th style="border-bottom:1px solid #eee;text-align:right;padding:4px 0;">Price</th>
        </tr>
      </thead>
      <tbody>
      ${products.map(p => `
        <tr>
          <td style="padding:3px 0;display:flex;align-items:center;gap:7px;">
            ${p.img ? `<img src="${p.img}" alt="${p.name||'Product'}" style="width:36px;height:36px;object-fit:contain;border-radius:6px;border:1px solid #eee;margin-right:7px;background:#fff;">` : ''}
            <div>
              ${p.name ? `<b>${p.name}</b>` : ''}
              ${p.desc ? `<div style="font-size:0.85em;color:#888;">${p.desc}</div>` : ''}
            </div>
          </td>
          <td style="text-align:center;padding:3px 0;">${p.qty || 1}</td>
          <td style="text-align:right;padding:3px 0;">${p.price || ''}</td>
        </tr>
      `).join('')}
      </tbody>
    </table>`;
  } else {
    itemsHTML = 'Purchased Phones<br>';
  }

  const receiptHtml = `
    <div style="font-family:sans-serif;max-width:430px;margin:0 auto;border:1px solid #eee;border-radius:8px;padding:24px;box-shadow:0 2px 8px #0002;">
      <h2 style="text-align:center;color:#4dd784;margin-top:0;">Google Store - Receipt</h2>
      <div style="font-size:1.05em;margin:10px 0;"><b>Date:</b> ${date.toLocaleString()}</div>
      <div style="margin:15px 0 14px 0;"><b>Purchased Items:</b></div>
      <div style="margin-bottom:12px">${itemsHTML}</div>
      <div style="font-size:1.2em;margin-bottom:20px;"><b>Total Paid:</b> <span style="color:#4dd784;">${total}</span></div>
      <div style="margin-bottom:18px;color:#5c5c5c;">Payment Successful via Card/NetBanking/UPI</div>
      <div style="font-size:0.9em;color:#333;text-align:center;">Developed by abinash kumar</div>
    </div>
  `;
  const viewWin = window.open("", '_blank','width=480,height=600');
  if(viewWin){
    viewWin.document.write('<title>Google Store Receipt</title>');
    viewWin.document.write(receiptHtml);
    viewWin.document.close();
  }
}

// Download receipt as text file (with products)
function downloadReceipt() {
  const date = new Date();
  const total = document.getElementById('totalPaymentAmount').textContent;
  let products = extractCartProducts();
  let itemsText = '';
  
  if (products.length > 0) {
    itemsText += 'Products Purchased:' + "\n";
    products.forEach(p => {
      itemsText += `- ${p.name || 'Product'}${p.desc ? ` (${p.desc})`:''} | Qty: ${p.qty || 1} | Price: ${p.price || ''}\n`;
    });
  } else {
    itemsText = '- Purchased Phones\n';
  }

  const receiptTxt = 
`Google Store Receipt
----------------------------
Date: ${date.toLocaleString()}
${itemsText}
----------------------------
Total Paid: ${total}
Payment Successful!
----------------------------
Developed by abinash kumar
`;
  const blob = new Blob([receiptTxt],{type:'text/plain'});
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = `GoogleStore_Receipt_${Date.now()}.txt`;
  link.click();
}

// Update the total amount in Payment Modal from cart
function updateTotalPaymentAmount() {
  let total = 0;
  // Try to get the total from #cartTotal if available
  const cartTotalElem = document.getElementById('cartTotal');
  if (cartTotalElem) {
    // Try to parse ‚Çπ amounts
    const value = cartTotalElem.textContent || '';
    const n = value.replace(/[^0-9.]/g,'');
    if (n) total = parseFloat(n);
  }
  // If you have cart stored somewhere else, sum up here as needed
  const paymentAmountElem = document.getElementById('totalPaymentAmount');
  if(paymentAmountElem) {
    paymentAmountElem.textContent = '‚Çπ' + (isNaN(total) ? '0' : total);
  }
}

// Optionally clear cart after payment
function clearCartAfterPayment() {
  const cartList = document.getElementById("cartList");
  if(cartList) cartList.innerHTML = "";
  const cartTotal = document.getElementById("cartTotal");
  if(cartTotal) cartTotal.textContent = '‚Çπ0';
  const cartCount = document.getElementById("cartCount");
  if(cartCount) cartCount.textContent = '0';
}

// Attach event to checkout button
document.addEventListener('DOMContentLoaded', function() {
  const checkoutBtn = document.getElementById('checkout');
  if(checkoutBtn){
    checkoutBtn.addEventListener('click', function(ev){
      ev.preventDefault();
      openPaymentModal();
    });
  }
  // Keep total in payment modal synced with cartTotal on open, or if cart changes
  const cartTotalElem = document.getElementById('cartTotal');
  if(cartTotalElem) {
    const observer = new MutationObserver(updateTotalPaymentAmount);
    observer.observe(cartTotalElem, {childList:true, characterData:true, subtree:true});
  }
  // Add UPI "payment" complete simulation (since it's not submitting a form)
  const upiBtn = document.createElement('button');
  upiBtn.type = "button";
  upiBtn.textContent = "I've Paid via UPI";
  upiBtn.className = "btn primary";
  upiBtn.style = "margin-top:1.5em; width:100%";
  upiBtn.onclick = function(){ handlePaymentDone('UPI'); }
  const upiDiv = document.getElementById('paymentUPI');
  if(upiDiv && !document.getElementById("upiPaidBtn")){
    upiBtn.id = "upiPaidBtn";
    upiDiv.appendChild(upiBtn);
  }
});

// Close modal on outside click
paymentModal.addEventListener('mousedown', function(e) {
  if (e.target == paymentModal)
    closePaymentModal();
});
</script>
  
<script src="script.js" defer></script>
</body>
</html>

